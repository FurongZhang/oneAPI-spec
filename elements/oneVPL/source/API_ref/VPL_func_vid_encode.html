<!--
SPDX-FileCopyrightText: 2019-2020 Intel Corporation

SPDX-License-Identifier: MIT
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>VideoENCODE &mdash; oneAPI Specification 1.0-rev-1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="VideoVPP" href="VPL_func_vid_vpp.html" />
    <link rel="prev" title="VideoDECODE" href="VPL_func_vid_decode.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0-rev-1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneDPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDNN/source/index.html">oneDNN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">oneCCL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneDAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneTBB/source/nested-index.html">oneTBB</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">oneVPL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../architecture/index.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/index.html">Programming Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VPL_summary.html">Mandatory APIs and Functions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="VPL_api_ref.html">oneVPL API Reference</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="VPL_functions.html">Function Reference</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="VPL_func_vid_decode.html">VideoDECODE</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">VideoENCODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="VPL_func_vid_vpp.html">VideoVPP</a></li>
<li class="toctree-l4"><a class="reference internal" href="VPL_func_vidcore.html">VideoCORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="VPL_func_session.html">Session Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="VPL_func_mem.html">Memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="VPL_func_capabilities.html">Implementation Capabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="VPL_func_adapters.html">Adapters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="VPL_structs.html">Structure Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="VPL_enums.html">Enumerator Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="VPL_defines.html">Define Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="VPL_ref_types.html">Type Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="VPL_disp_api.html">Dispatcher API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Versioning.html">oneVPL API Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/index.html">Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VPL_acronyms.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneMKL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <!--
SPDX-FileCopyrightText: 2019-2020 Intel Corporation

SPDX-License-Identifier: MIT
-->

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../index.html">oneVPL</a> </li>
          
        
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneVPL/source/API_ref/VPL_func_vid_encode.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="videoencode">
<span id="func-video-encode"></span><h1>VideoENCODE<a class="headerlink" href="#videoencode" title="Permalink to this headline">¶</a></h1>
<p id="func-vid-encode-begin">Functions that perform the entire encoding pipeline from the input video frames
to the output bitstream.</p>
<div class="section" id="api">
<span id="func-vid-encode-end"></span><h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#mfxvideoencode-query" id="id1">MFXVideoENCODE_Query</a></p></li>
<li><p><a class="reference internal" href="#mfxvideoencode-queryiosurf" id="id2">MFXVideoENCODE_QueryIOSurf</a></p></li>
<li><p><a class="reference internal" href="#mfxvideoencode-init" id="id3">MFXVideoENCODE_Init</a></p></li>
<li><p><a class="reference internal" href="#mfxvideoencode-reset" id="id4">MFXVideoENCODE_Reset</a></p></li>
<li><p><a class="reference internal" href="#mfxvideoencode-close" id="id5">MFXVideoENCODE_Close</a></p></li>
<li><p><a class="reference internal" href="#mfxvideoencode-getvideoparam" id="id6">MFXVideoENCODE_GetVideoParam</a></p></li>
<li><p><a class="reference internal" href="#mfxvideoencode-getencodestat" id="id7">MFXVideoENCODE_GetEncodeStat</a></p></li>
<li><p><a class="reference internal" href="#mfxvideoencode-encodeframeasync" id="id8">MFXVideoENCODE_EncodeFrameAsync</a></p></li>
</ul>
</div>
<div class="section" id="mfxvideoencode-query">
<h3><a class="toc-backref" href="#id1">MFXVideoENCODE_Query</a><a class="headerlink" href="#mfxvideoencode-query" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv420MFXVideoENCODE_Query10mfxSessionP13mfxVideoParamP13mfxVideoParam">
<span id="_CPPv320MFXVideoENCODE_Query10mfxSessionP13mfxVideoParamP13mfxVideoParam"></span><span id="_CPPv220MFXVideoENCODE_Query10mfxSessionP13mfxVideoParamP13mfxVideoParam"></span><span id="MFXVideoENCODE_Query__mfxSession.mfxVideoParamP.mfxVideoParamP"></span><span class="target" id="mfxvideo_8h_1a9e28e0bd59ca881a1925764a4ff85cd1"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_Query</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em>, <a class="reference internal" href="VPL_structs_cross_component.html#_CPPv413mfxVideoParam" title="mfxVideoParam">mfxVideoParam</a> *<em>in</em>, <a class="reference internal" href="VPL_structs_cross_component.html#_CPPv413mfxVideoParam" title="mfxVideoParam">mfxVideoParam</a> *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420MFXVideoENCODE_Query10mfxSessionP13mfxVideoParamP13mfxVideoParam" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Works in either of four modes: </p>
<p><ul class="simple">
<li><p>If the <code class="docutils literal notranslate"><span class="pre">in</span></code> parameter is zero, the function returns the class configurability in the output structure. The output structure has a non-zero value in each field that the implementation can configure using Init.</p></li>
</ul>
<ul class="simple">
<li><p>If the <code class="docutils literal notranslate"><span class="pre">in</span></code> parameter is non-zero, the function checks the validity of the fields in the input structure. Then the function returns the corrected values in the output structure. If there is insufficient information to determine the validity or correction is impossible, the function zeroes the fields. This feature can verify whether the implementation supports certain profiles, levels or bitrates.</p></li>
</ul>
<ul class="simple">
<li><p>If the <code class="docutils literal notranslate"><span class="pre">in</span></code> parameter is non-zero and <a class="reference internal" href="VPL_structs_encode.html#structmfx_ext_encoder_reset_option"><span class="std std-ref">mfxExtEncoderResetOption</span></a> structure is attached to it, the function queries for the outcome of the MFXVideoENCODE_Reset function and returns it in the <a class="reference internal" href="VPL_structs_encode.html#structmfx_ext_encoder_reset_option"><span class="std std-ref">mfxExtEncoderResetOption</span></a> structure attached to out. The query function succeeds if a reset is possible and returns an error otherwise. Unlike other modes that are independent of the encoder state, this one checks if reset is possible in the present encoder state. This mode also requires a completely defined <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure, unlike other modes that support partially defined configurations. See <a class="reference internal" href="VPL_structs_encode.html#structmfx_ext_encoder_reset_option"><span class="std std-ref">mfxExtEncoderResetOption</span></a> description for more details.</p></li>
</ul>
<ul class="simple">
<li><p>If the <code class="docutils literal notranslate"><span class="pre">in</span></code> parameter is non-zero and <a class="reference internal" href="VPL_structs_encode.html#structmfx_ext_encoder_capability"><span class="std std-ref">mfxExtEncoderCapability</span></a> structure is attached to it, the function returns encoder capability in the <a class="reference internal" href="VPL_structs_encode.html#structmfx_ext_encoder_capability"><span class="std std-ref">mfxExtEncoderCapability</span></a> structure attached to out. It is recommended to fill in the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure and set the hardware acceleration device handle before calling the function in this mode.</p></li>
</ul>
<p>The application can call this function before or after it initializes the encoder. The </p>
<code class="docutils literal notranslate"><span class="pre">CodecId</span></code> field of the output structure is a mandated field (to be filled by the application) to identify the coding standard.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. <p>MFX_ERR_UNSUPPORTED The function failed to identify a specific implementation for the required features. </p>
<p>MFX_WRN_PARTIAL_ACCELERATION The underlying hardware does not fully support the specified video parameters. The encoding may be partially accelerated. Only hardware implementations may return this status code. </p>
<p>MFX_WRN_INCOMPATIBLE_VIDEO_PARAM The function detected some video parameters were incompatible with others; incompatibility resolved. </p>
</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">in</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure as input. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">out</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure as output.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <a class="reference internal" href="#_CPPv420MFXVideoENCODE_Query10mfxSessionP13mfxVideoParamP13mfxVideoParam" title="MFXVideoENCODE_Query"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">MFXVideoENCODE_Query()</span></code></a> function is mandatory when
implementing an encoder.</p>
</div>
</div>
<div class="section" id="mfxvideoencode-queryiosurf">
<h3><a class="toc-backref" href="#id2">MFXVideoENCODE_QueryIOSurf</a><a class="headerlink" href="#mfxvideoencode-queryiosurf" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv426MFXVideoENCODE_QueryIOSurf10mfxSessionP13mfxVideoParamP20mfxFrameAllocRequest">
<span id="_CPPv326MFXVideoENCODE_QueryIOSurf10mfxSessionP13mfxVideoParamP20mfxFrameAllocRequest"></span><span id="_CPPv226MFXVideoENCODE_QueryIOSurf10mfxSessionP13mfxVideoParamP20mfxFrameAllocRequest"></span><span id="MFXVideoENCODE_QueryIOSurf__mfxSession.mfxVideoParamP.mfxFrameAllocRequestP"></span><span class="target" id="mfxvideo_8h_1ac0ff48db8c00ab65a3024a5cb543eba1"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_QueryIOSurf</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em>, <a class="reference internal" href="VPL_structs_cross_component.html#_CPPv413mfxVideoParam" title="mfxVideoParam">mfxVideoParam</a> *<em>par</em>, <a class="reference internal" href="VPL_structs_memory.html#_CPPv420mfxFrameAllocRequest" title="mfxFrameAllocRequest">mfxFrameAllocRequest</a> *<em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426MFXVideoENCODE_QueryIOSurf10mfxSessionP13mfxVideoParamP20mfxFrameAllocRequest" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns minimum and suggested numbers of the input frame surfaces required for encoding initialization and their type. </p>
<p>Init will call the external allocator for the required frames with the same set of numbers. This function does not validate I/O parameters except those used in calculating the number of input surfaces.</p>
<p>The use of this function is recommended. <p><p>For more information, see the <a class="reference internal" href="../programming_guide/VPL_prg_hw.html#hw-acceleration"><span class="std std-ref">Working with Hardware Acceleration section</span></a>.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. <p>MFX_ERR_INVALID_VIDEO_PARAM The function detected invalid video parameters. These parameters may be out of the valid range or the combination of them resulted in incompatibility. Incompatibility not resolved. </p>
<p>MFX_WRN_PARTIAL_ACCELERATION The underlying hardware does not fully support the specified video parameters. The encoding may be partially accelerated. Only hardware implementations may return this status code. </p>
<p>MFX_WRN_INCOMPATIBLE_VIDEO_PARAM The function detected some video parameters were incompatible with others; incompatibility resolved. </p>
</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">par</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure as input. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">request</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_memory.html#structmfx_frame_alloc_request"><span class="std std-ref">mfxFrameAllocRequest</span></a> structure as output.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="mfxvideoencode-init">
<h3><a class="toc-backref" href="#id3">MFXVideoENCODE_Init</a><a class="headerlink" href="#mfxvideoencode-init" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv419MFXVideoENCODE_Init10mfxSessionP13mfxVideoParam">
<span id="_CPPv319MFXVideoENCODE_Init10mfxSessionP13mfxVideoParam"></span><span id="_CPPv219MFXVideoENCODE_Init10mfxSessionP13mfxVideoParam"></span><span id="MFXVideoENCODE_Init__mfxSession.mfxVideoParamP"></span><span class="target" id="mfxvideo_8h_1a72b9663a762785f43bd4914b8e40bf40"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_Init</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em>, <a class="reference internal" href="VPL_structs_cross_component.html#_CPPv413mfxVideoParam" title="mfxVideoParam">mfxVideoParam</a> *<em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419MFXVideoENCODE_Init10mfxSessionP13mfxVideoParam" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocates memory and prepares tables and necessary structures for encoding. </p>
<p>This function also does extensive validation to ensure if the configuration, as specified in the input parameters, is supported.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. <p>MFX_ERR_INVALID_VIDEO_PARAM The function detected invalid video parameters. These parameters may be out of the valid range, or the combination of them resulted in incompatibility. Incompatibility not resolved. </p>
<p>MFX_WRN_PARTIAL_ACCELERATION The underlying hardware does not fully support the specified video parameters. The encoding may be partially accelerated. Only hardware implementations may return this status code. </p>
<p>MFX_WRN_INCOMPATIBLE_VIDEO_PARAM The function detected some video parameters were incompatible with others; incompatibility resolved. </p>
<p>MFX_ERR_UNDEFINED_BEHAVIOR The function is called twice without a close; </p>
</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">par</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <a class="reference internal" href="#_CPPv419MFXVideoENCODE_Init10mfxSessionP13mfxVideoParam" title="MFXVideoENCODE_Init"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">MFXVideoENCODE_Init()</span></code></a> function is mandatory when
implementing an encoder.</p>
</div>
</div>
<div class="section" id="mfxvideoencode-reset">
<h3><a class="toc-backref" href="#id4">MFXVideoENCODE_Reset</a><a class="headerlink" href="#mfxvideoencode-reset" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv420MFXVideoENCODE_Reset10mfxSessionP13mfxVideoParam">
<span id="_CPPv320MFXVideoENCODE_Reset10mfxSessionP13mfxVideoParam"></span><span id="_CPPv220MFXVideoENCODE_Reset10mfxSessionP13mfxVideoParam"></span><span id="MFXVideoENCODE_Reset__mfxSession.mfxVideoParamP"></span><span class="target" id="mfxvideo_8h_1a46a023e528bb03239ca0ce2a7823b166"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_Reset</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em>, <a class="reference internal" href="VPL_structs_cross_component.html#_CPPv413mfxVideoParam" title="mfxVideoParam">mfxVideoParam</a> *<em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420MFXVideoENCODE_Reset10mfxSessionP13mfxVideoParam" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Stops the current encoding operation and restores internal structures or parameters for a new encoding operation, possibly with new parameters. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. <p>MFX_ERR_INVALID_VIDEO_PARAM The function detected invalid video parameters. These parameters may be out of the valid range, or the combination of them resulted in incompatibility. Incompatibility not resolved. </p>
<p>MFX_ERR_INCOMPATIBLE_VIDEO_PARAM The function detected that video parameters provided by the application are incompatible with initialization parameters. Reset requires additional memory allocation and cannot be executed. The application should close the component and then reinitialize it. </p>
<p>MFX_WRN_INCOMPATIBLE_VIDEO_PARAM The function detected some video parameters were incompatible with others; incompatibility resolved. </p>
</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">par</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="mfxvideoencode-close">
<h3><a class="toc-backref" href="#id5">MFXVideoENCODE_Close</a><a class="headerlink" href="#mfxvideoencode-close" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv420MFXVideoENCODE_Close10mfxSession">
<span id="_CPPv320MFXVideoENCODE_Close10mfxSession"></span><span id="_CPPv220MFXVideoENCODE_Close10mfxSession"></span><span id="MFXVideoENCODE_Close__mfxSession"></span><span class="target" id="mfxvideo_8h_1a50d5f8c1a1949029dd0dab79f41850d1"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_Close</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420MFXVideoENCODE_Close10mfxSession" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Terminates the current encoding operation and de-allocates any internal tables or structures. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <a class="reference internal" href="#_CPPv420MFXVideoENCODE_Close10mfxSession" title="MFXVideoENCODE_Close"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">MFXVideoENCODE_Close()</span></code></a> function is mandatory when
implementing an encoder.</p>
</div>
</div>
<div class="section" id="mfxvideoencode-getvideoparam">
<h3><a class="toc-backref" href="#id6">MFXVideoENCODE_GetVideoParam</a><a class="headerlink" href="#mfxvideoencode-getvideoparam" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv428MFXVideoENCODE_GetVideoParam10mfxSessionP13mfxVideoParam">
<span id="_CPPv328MFXVideoENCODE_GetVideoParam10mfxSessionP13mfxVideoParam"></span><span id="_CPPv228MFXVideoENCODE_GetVideoParam10mfxSessionP13mfxVideoParam"></span><span id="MFXVideoENCODE_GetVideoParam__mfxSession.mfxVideoParamP"></span><span class="target" id="mfxvideo_8h_1ab2213ec2a6e028e80df2d68906885635"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_GetVideoParam</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em>, <a class="reference internal" href="VPL_structs_cross_component.html#_CPPv413mfxVideoParam" title="mfxVideoParam">mfxVideoParam</a> *<em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428MFXVideoENCODE_GetVideoParam10mfxSessionP13mfxVideoParam" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieves current working parameters to the specified output structure. </p>
<p>If extended buffers are to be returned, the application must allocate those extended buffers and attach them as part of the output structure. The application can retrieve a copy of the bitstream header by attaching the <a class="reference internal" href="VPL_structs_encode.html#structmfx_ext_coding_option_s_p_s_p_p_s"><span class="std std-ref">mfxExtCodingOptionSPSPPS</span></a> structure to the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">par</span></code>: Pointer to the corresponding parameter structure.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="mfxvideoencode-getencodestat">
<h3><a class="toc-backref" href="#id7">MFXVideoENCODE_GetEncodeStat</a><a class="headerlink" href="#mfxvideoencode-getencodestat" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv428MFXVideoENCODE_GetEncodeStat10mfxSessionP13mfxEncodeStat">
<span id="_CPPv328MFXVideoENCODE_GetEncodeStat10mfxSessionP13mfxEncodeStat"></span><span id="_CPPv228MFXVideoENCODE_GetEncodeStat10mfxSessionP13mfxEncodeStat"></span><span id="MFXVideoENCODE_GetEncodeStat__mfxSession.mfxEncodeStatP"></span><span class="target" id="mfxvideo_8h_1a4cd2faa2244b8c366583c6438ce08288"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_GetEncodeStat</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em>, <a class="reference internal" href="VPL_structs_encode.html#_CPPv413mfxEncodeStat" title="mfxEncodeStat">mfxEncodeStat</a> *<em>stat</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428MFXVideoENCODE_GetEncodeStat10mfxSessionP13mfxEncodeStat" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Obtains statistics collected during encoding. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">stat</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_encode.html#structmfx_encode_stat"><span class="std std-ref">mfxEncodeStat</span></a> structure.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="mfxvideoencode-encodeframeasync">
<h3><a class="toc-backref" href="#id8">MFXVideoENCODE_EncodeFrameAsync</a><a class="headerlink" href="#mfxvideoencode-encodeframeasync" title="Permalink to this headline">¶</a></h3>
<dl class="cpp function">
<dt id="_CPPv431MFXVideoENCODE_EncodeFrameAsync10mfxSessionP13mfxEncodeCtrlP16mfxFrameSurface1P12mfxBitstreamP12mfxSyncPoint">
<span id="_CPPv331MFXVideoENCODE_EncodeFrameAsync10mfxSessionP13mfxEncodeCtrlP16mfxFrameSurface1P12mfxBitstreamP12mfxSyncPoint"></span><span id="_CPPv231MFXVideoENCODE_EncodeFrameAsync10mfxSessionP13mfxEncodeCtrlP16mfxFrameSurface1P12mfxBitstreamP12mfxSyncPoint"></span><span id="MFXVideoENCODE_EncodeFrameAsync__mfxSession.mfxEncodeCtrlP.mfxFrameSurface1P.mfxBitstreamP.mfxSyncPointP"></span><span class="target" id="mfxvideo_8h_1a266fa33c1cdb4b2483566437bf8f71f8"></span><a class="reference internal" href="VPL_enums.html#_CPPv49mfxStatus" title="mfxStatus">mfxStatus</a> <code class="sig-name descname">MFXVideoENCODE_EncodeFrameAsync</code><span class="sig-paren">(</span><a class="reference internal" href="VPL_ref_types.html#_CPPv410mfxSession" title="mfxSession">mfxSession</a> <em>session</em>, <a class="reference internal" href="VPL_structs_encode.html#_CPPv413mfxEncodeCtrl" title="mfxEncodeCtrl">mfxEncodeCtrl</a> *<em>ctrl</em>, <a class="reference internal" href="VPL_structs_memory.html#_CPPv416mfxFrameSurface1" title="mfxFrameSurface1">mfxFrameSurface1</a> *<em>surface</em>, <a class="reference internal" href="VPL_structs_memory.html#_CPPv412mfxBitstream" title="mfxBitstream">mfxBitstream</a> *<em>bs</em>, <a class="reference internal" href="VPL_ref_types.html#_CPPv412mfxSyncPoint" title="mfxSyncPoint">mfxSyncPoint</a> *<em>syncp</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431MFXVideoENCODE_EncodeFrameAsync10mfxSessionP13mfxEncodeCtrlP16mfxFrameSurface1P12mfxBitstreamP12mfxSyncPoint" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Takes a single input frame in either encoded or display order and generates its output bitstream. </p>
<p>In the case of encoded ordering, the <a class="reference internal" href="VPL_structs_encode.html#structmfx_encode_ctrl"><span class="std std-ref">mfxEncodeCtrl</span></a> structure must specify the explicit frame type. In the case of display ordering, this function handles frame order shuffling according to the GOP structure parameters specified during initialization.</p>
<p>Since encoding may process frames differently from the input order, not every call of the function generates output and the function returns MFX_ERR_MORE_DATA. If the encoder needs to cache the frame, the function locks the frame. The application should not alter the frame until the encoder unlocks the frame. If there is output (with return status MFX_ERR_NONE), the return is a frame’s worth of bitstream.</p>
<p>It is the calling application’s responsibility to ensure that there is sufficient space in the output buffer. The value <code class="docutils literal notranslate"><span class="pre">BufferSizeInKB</span></code> in the <a class="reference internal" href="VPL_structs_cross_component.html#structmfx_video_param"><span class="std std-ref">mfxVideoParam</span></a> structure at encoding initialization specifies the maximum possible size for any compressed frames. This value can also be obtained from the MFXVideoENCODE_GetVideoParam function after encoding initialization.</p>
<p>To mark the end of the encoding sequence, call this function with a NULL surface pointer. Repeat the call to drain any remaining internally cached bitstreams (one frame at a time) until MFX_ERR_MORE_DATA is returned.</p>
<p>This function is asynchronous.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>MFX_ERR_NONE The function completed successfully. <p>MFX_ERR_NOT_ENOUGH_BUFFER The bitstream buffer size is insufficient. </p>
<p>MFX_ERR_MORE_DATA The function requires more data to generate any output. </p>
<p>MFX_ERR_DEVICE_LOST Hardware device was lost. </p>
<p><p>See the <a class="reference internal" href="../programming_guide/VPL_prg_hw.html#work-ms-directx-app"><span class="std std-ref">Working with Microsoft* DirectX* Applications section</span></a> for further information.</p>
</p>
 <p>MFX_WRN_DEVICE_BUSY Hardware device is currently busy. Call this function again in a few milliseconds. </p>
<p>MFX_ERR_INCOMPATIBLE_VIDEO_PARAM Inconsistent parameters detected not conforming to Configuration Parameter Constraints. </p>
</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">session</span></code>: Session handle. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">ctrl</span></code>: Pointer to the <a class="reference internal" href="VPL_structs_encode.html#structmfx_encode_ctrl"><span class="std std-ref">mfxEncodeCtrl</span></a> structure for per-frame encoding control; this parameter is optional (it can be NULL) if the encoder works in the display order mode. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">surface</span></code>: Pointer to the frame surface structure. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">bs</span></code>: Pointer to the output bitstream. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">syncp</span></code>: Pointer to the returned sync point associated with this operation.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <a class="reference internal" href="#_CPPv431MFXVideoENCODE_EncodeFrameAsync10mfxSessionP13mfxEncodeCtrlP16mfxFrameSurface1P12mfxBitstreamP12mfxSyncPoint" title="MFXVideoENCODE_EncodeFrameAsync"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">MFXVideoENCODE_EncodeFrameAsync()</span></code></a> function is mandatory when
implementing an encoder.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="VPL_func_vid_vpp.html" class="btn btn-neutral float-right" title="VideoVPP" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="VPL_func_vid_decode.html" class="btn btn-neutral float-left" title="VideoDECODE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>