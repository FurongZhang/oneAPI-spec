<!--
SPDX-FileCopyrightText: 2019-2020 Intel Corporation

SPDX-License-Identifier: MIT
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>oneCCL Concepts &mdash; oneAPI Specification 1.0-rev-2 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Communication Operations" href="operations.html" />
    <link rel="prev" title="Definitions" href="../definitions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0-rev-2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneDPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDNN/source/index.html">oneDNN</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">oneCCL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces.html">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec_version.html">Current Version of this oneCCL Specification</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../definitions.html">Definitions</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">oneCCL Concepts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#device">Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="#context">Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key-value-store">Key-Value Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="#communicator">Communicator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stream">Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#event">Event</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operation-attributes">Operation Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="operations.html">Communication Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="error_handling.html">Error handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../programming_model.html">Programming Model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneDAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneTBB/source/nested-index.html">oneTBB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">oneVPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneMKL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <!--
SPDX-FileCopyrightText: 2019-2020 Intel Corporation

SPDX-License-Identifier: MIT
-->

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../index.html">oneCCL</a> </li>
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneCCL/source/spec/main_objects.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="oneccl-concepts">
<h1>oneCCL Concepts<a class="headerlink" href="#oneccl-concepts" title="Permalink to this headline">¶</a></h1>
<p>oneCCL specification defines the following list of concepts:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#device">Device</a></p></li>
<li><p><a class="reference internal" href="#context">Context</a></p></li>
<li><p><a class="reference internal" href="#key-value-store">Key-Value Store</a></p></li>
<li><p><a class="reference internal" href="#communicator">Communicator</a></p></li>
<li><p><a class="reference internal" href="#stream">Stream</a></p></li>
<li><p><a class="reference internal" href="#event">Event</a></p></li>
<li><p><a class="reference internal" href="#operation-attributes">Operation Attributes</a></p></li>
</ul>
<div class="section" id="device">
<span id="id1"></span><h2>Device<a class="headerlink" href="#device" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here and below, a native device/context/stream/event are defined in the scope of SYCL device runtime</p>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">native_device_type</span> <span class="o">=</span> <span class="n">sycl</span><span class="o">::</span><span class="n">device</span><span class="p">;</span>
<span class="k">using</span> <span class="n">native_context_type</span> <span class="o">=</span> <span class="n">sycl</span><span class="o">::</span><span class="n">context</span><span class="p">;</span>
<span class="k">using</span> <span class="n">native_stream_type</span> <span class="o">=</span> <span class="n">sycl</span><span class="o">::</span><span class="n">queue</span><span class="p">;</span>
<span class="k">using</span> <span class="n">native_event_type</span> <span class="o">=</span> <span class="n">sycl</span><span class="o">::</span><span class="n">event</span><span class="p">;</span>
</pre></div>
</div>
<p>oneCCL specification defines <code class="docutils literal notranslate"><span class="pre">device</span></code> as an abstraction of a computational device: a CPU, a specific GPU card in the system, or any other device participating in a communication operation. <code class="docutils literal notranslate"><span class="pre">device</span></code> corresponds to the communicator’s rank (addressable entity in a communication operation).</p>
<p>oneCCL specification defines the way to create an instance of the <code class="docutils literal notranslate"><span class="pre">device</span></code> class with a native object (<code class="docutils literal notranslate"><span class="pre">native_device_type</span></code>) and without a native object (corresponds to the host).</p>
<p>Creating a new device object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_device</span><span class="p">(</span><span class="n">native_device_type</span><span class="o">&amp;</span> <span class="n">native_device</span><span class="p">);</span>

<span class="n">device</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_device</span><span class="p">();</span>
</pre></div>
</div>
<dl class="simple">
<dt>native_device</dt><dd><p>the existing native device object</p>
</dd>
<dt>return <code class="docutils literal notranslate"><span class="pre">device</span></code></dt><dd><p>a device object</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">device</span></code> class shall provide ability to retrieve a native object.</p>
<p>Retrieving a native device object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">native_device_type</span> <span class="n">device</span><span class="o">::</span><span class="n">get_native</span><span class="p">();</span>
</pre></div>
</div>
<dl>
<dt>return <code class="docutils literal notranslate"><span class="pre">native_device_type</span></code></dt><dd><div class="line-block">
<div class="line">a native device object</div>
<div class="line">shall throw exception if a <code class="docutils literal notranslate"><span class="pre">device</span></code> object does not wrap the native object</div>
</div>
</dd>
</dl>
</div>
<div class="section" id="context">
<span id="id2"></span><h2>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h2>
<p>oneCCL specification defines <code class="docutils literal notranslate"><span class="pre">context</span></code> as an abstraction of a computational devices context that is responsible for managing resources and for executing of communication operations on one or more devices specified in the context.</p>
<p>oneCCL specification defines the way to create an instance of the <code class="docutils literal notranslate"><span class="pre">context</span></code> class with a native object (<code class="docutils literal notranslate"><span class="pre">native_context_type</span></code>) and without a native object.</p>
<p>Creating a new context object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">context</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_context</span><span class="p">(</span><span class="n">native_context_type</span><span class="o">&amp;</span> <span class="n">native_context</span><span class="p">);</span>

<span class="n">context</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_context</span><span class="p">();</span>
</pre></div>
</div>
<dl class="simple">
<dt>native_context</dt><dd><p>the existing native context object</p>
</dd>
<dt>return <code class="docutils literal notranslate"><span class="pre">context</span></code></dt><dd><p>a context object</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">context</span></code> class shall provide ability to retrieve a native object.</p>
<p>Retrieving a native context object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">native_context_type</span> <span class="n">context</span><span class="o">::</span><span class="n">get_native</span><span class="p">();</span>
</pre></div>
</div>
<dl>
<dt>return <code class="docutils literal notranslate"><span class="pre">native_context_type</span></code></dt><dd><div class="line-block">
<div class="line">a native context object</div>
<div class="line">shall throw exception if a <code class="docutils literal notranslate"><span class="pre">context</span></code> object does not wrap the native object</div>
</div>
</dd>
</dl>
</div>
<div class="section" id="key-value-store">
<h2>Key-Value Store<a class="headerlink" href="#key-value-store" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">kvs_interface</span></code> defines the key-value store (KVS) interface to be used to establish connection between ranks during the creation of oneCCL communicator. The interface shall include blocking <code class="docutils literal notranslate"><span class="pre">get</span></code> and <code class="docutils literal notranslate"><span class="pre">set</span></code> methods.</p>
<p>Getting a record from the key-value store:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">virtual</span> <span class="n">vector_class</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">kvs_interface</span><span class="o">::</span><span class="n">get</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">string_class</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<dl class="simple">
<dt>key</dt><dd><p>the key of value to be retrieved</p>
</dd>
<dt>return <code class="docutils literal notranslate"><span class="pre">vector_class&lt;char&gt;</span></code></dt><dd><p>the value associated with the given key</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">get</span></code> operation with a non-existing key shall return empty result</p>
</div>
<p>Saving a record in the key-value store:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="n">kvs_interface</span><span class="o">::</span><span class="n">set</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">string_class</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">vector_class</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<dl class="simple">
<dt>key</dt><dd><p>the key at which the value should be stored</p>
</dd>
<dt>data</dt><dd><p>the value that should be associated with the given key</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">set</span></code> operation with empty <code class="docutils literal notranslate"><span class="pre">data</span></code> shall remove a record from the key-value store</p>
</div>
<p>oneCCL specification defines <code class="docutils literal notranslate"><span class="pre">kvs</span></code> class as a built-in KVS provided by oneCCL.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">kvs</span> <span class="o">:</span> <span class="k">public</span> <span class="n">kvs_interface</span> <span class="p">{</span>

<span class="k">public</span><span class="o">:</span>

<span class="k">static</span> <span class="k">constexpr</span> <span class="kt">size_t</span> <span class="n">address_max_size</span> <span class="o">=</span> <span class="mi">256</span><span class="p">;</span>
<span class="k">using</span> <span class="n">address_type</span> <span class="o">=</span> <span class="n">array_class</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">address_max_size</span><span class="o">&gt;</span><span class="p">;</span>

<span class="o">~</span><span class="n">kvs</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span>

<span class="n">address_type</span> <span class="nf">get_address</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

<span class="n">vector_class</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">get</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">string_class</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">set</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">string_class</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">vector_class</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Retrieving an address of built-in key-value store:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">kvs</span><span class="o">::</span><span class="n">address_type</span> <span class="n">kvs</span><span class="o">::</span><span class="n">get_address</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<dl>
<dt>return <code class="docutils literal notranslate"><span class="pre">kvs::address_type</span></code></dt><dd><div class="line-block">
<div class="line">the address of the key-value store</div>
<div class="line">should be retrieved from the main built-in KVS and distributed to other processes for the built-in KVS creation</div>
</div>
</dd>
</dl>
<p>Creating a main built-in key-value store. Its address should be distributed using an out-of-band communication mechanism
and be used to create key-value stores on other ranks:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">shared_ptr_class</span><span class="o">&lt;</span><span class="n">kvs</span><span class="o">&gt;</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_main_kvs</span><span class="p">();</span>
</pre></div>
</div>
<dl class="simple">
<dt>return <code class="docutils literal notranslate"><span class="pre">shared_ptr_class&lt;kvs&gt;</span></code></dt><dd><p>the main key-value store object</p>
</dd>
</dl>
<p>Creating a new key-value store from main kvs address:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">shared_ptr_class</span><span class="o">&lt;</span><span class="n">kvs</span><span class="o">&gt;</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_kvs</span><span class="p">(</span><span class="k">const</span> <span class="n">kvs</span><span class="o">::</span><span class="n">address_type</span><span class="o">&amp;</span> <span class="n">addr</span><span class="p">);</span>
</pre></div>
</div>
<dl class="simple">
<dt>addr</dt><dd><p>the address of the main kvs</p>
</dd>
<dt>return <code class="docutils literal notranslate"><span class="pre">shared_ptr_class&lt;kvs&gt;</span></code></dt><dd><p>key-value store object</p>
</dd>
</dl>
</div>
<div class="section" id="communicator">
<span id="id3"></span><h2>Communicator<a class="headerlink" href="#communicator" title="Permalink to this headline">¶</a></h2>
<p>oneCCL specification defines <code class="docutils literal notranslate"><span class="pre">communicator</span></code> class that describes a group of communicating ranks, where a rank is an addressable entity in a communication operation and corresponds to single oneCCL device.</p>
<p><code class="docutils literal notranslate"><span class="pre">communicator</span></code> defines communication operations on memory buffers between homogenous oneCCL devices, that is, all oneCCL devices either wrap native device objects of the same type (for example CPUs only or GPUs only) or do not wrap native objects.</p>
<p>Each process may correspond to multiple ranks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Support for multiple ranks per process is optional</p>
</div>
<p>Creating a new communicator(s) with user-supplied communicator size, rank-to-device mapping/rank, context and kvs:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">device</span></code> and <code class="docutils literal notranslate"><span class="pre">context</span></code> objects are omitted, then they are created with <code class="docutils literal notranslate"><span class="pre">ccl::create_device()</span></code> and <code class="docutils literal notranslate"><span class="pre">ccl::create_context()</span></code> functions without native objects</p>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">vector_class</span><span class="o">&lt;</span><span class="n">communicator</span><span class="o">&gt;</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_communicators</span><span class="p">(</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">map_class</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">device</span><span class="o">&gt;&amp;</span> <span class="n">rank_device_map</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">context</span><span class="o">&amp;</span> <span class="n">context</span><span class="p">,</span>
    <span class="n">shared_ptr_class</span><span class="o">&lt;</span><span class="n">kvs_interface</span><span class="o">&gt;</span> <span class="n">kvs</span><span class="p">);</span>

<span class="n">communicator</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_communicator</span><span class="p">(</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">rank</span><span class="p">,</span>
    <span class="n">shared_ptr_class</span><span class="o">&lt;</span><span class="n">kvs_interface</span><span class="o">&gt;</span> <span class="n">kvs</span><span class="p">);</span>
</pre></div>
</div>
<dl class="simple">
<dt>size</dt><dd><p>user-supplied total number of ranks</p>
</dd>
<dt>rank_device_map</dt><dd><p>user-supplied mapping of local ranks on devices</p>
</dd>
<dt>rank</dt><dd><p>user-supplied local rank</p>
</dd>
<dt>context</dt><dd><p>device context</p>
</dd>
<dt>kvs</dt><dd><p>key-value store for ranks wire-up</p>
</dd>
<dt>return <code class="docutils literal notranslate"><span class="pre">vector_class&lt;communicator&gt;</span></code> / <code class="docutils literal notranslate"><span class="pre">communicator</span></code></dt><dd><p>a vector of communicator objects  / a communicator object</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">communicator</span></code> shall provide methods to retrieve the rank, the device, and the context that correspond to the communicator object as well as the total number of ranks in the communicator.</p>
<p>Retrieving the rank in a communicator:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">communicator</span><span class="o">::</span><span class="n">rank</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<dl class="simple">
<dt>return <code class="docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>the rank that corresponds to the communicator object</p>
</dd>
</dl>
<p>Retrieving the total number of ranks in a communicator:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">communicator</span><span class="o">::</span><span class="n">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<dl class="simple">
<dt>return <code class="docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>the total number of the ranks</p>
</dd>
</dl>
<p>Retrieving an underlying device, which was used as communicator construction argument:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="n">communicator</span><span class="o">::</span><span class="n">get_device</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<dl class="simple">
<dt>return <code class="docutils literal notranslate"><span class="pre">device</span></code></dt><dd><p>the device that corresponds to the communicator object</p>
</dd>
</dl>
<p>Retrieving an underlying context, which was used as communicator construction argument:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">context</span> <span class="n">communicator</span><span class="o">::</span><span class="n">get_context</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<dl class="simple">
<dt>return <code class="docutils literal notranslate"><span class="pre">context</span></code></dt><dd><p>the context that corresponds to the communicator object</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See also: <a class="reference internal" href="collective_operations.html"><span class="doc">Collective Operations</span></a></p>
</div>
</div>
<div class="section" id="stream">
<span id="id4"></span><h2>Stream<a class="headerlink" href="#stream" title="Permalink to this headline">¶</a></h2>
<p>oneCCL specification defines <code class="docutils literal notranslate"><span class="pre">stream</span></code> as an abstraction that encapsulates execution context for <code class="docutils literal notranslate"><span class="pre">communicator</span></code> communication operations.</p>
<p>Stream shall be passed to <code class="docutils literal notranslate"><span class="pre">communicator</span></code> communication operation.</p>
<p>oneCCL specification defines the way to create an instance of the <code class="docutils literal notranslate"><span class="pre">stream</span></code> class with a native object (<code class="docutils literal notranslate"><span class="pre">native_stream_type</span></code>) and without a native object.</p>
<p>Creating a new stream object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">stream</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_stream</span><span class="p">(</span><span class="n">native_stream_type</span><span class="o">&amp;</span> <span class="n">native_stream</span><span class="p">);</span>

<span class="n">stream</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_stream</span><span class="p">();</span>
</pre></div>
</div>
<dl class="simple">
<dt>native_stream</dt><dd><p>the existing native stream object</p>
</dd>
<dt>return <code class="docutils literal notranslate"><span class="pre">stream</span></code></dt><dd><p>a stream object</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">stream</span></code> class shall provide ability to retrieve a native object.</p>
<p>Retrieving a native stream object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">native_stream_type</span> <span class="n">stream</span><span class="o">::</span><span class="n">get_native</span><span class="p">();</span>
</pre></div>
</div>
<dl>
<dt>return <code class="docutils literal notranslate"><span class="pre">native_stream_type</span></code></dt><dd><div class="line-block">
<div class="line">a native stream object</div>
<div class="line">shall throw exception if a <code class="docutils literal notranslate"><span class="pre">stream</span></code> object does not wrap the native object</div>
</div>
</dd>
</dl>
</div>
<div class="section" id="event">
<span id="id5"></span><h2>Event<a class="headerlink" href="#event" title="Permalink to this headline">¶</a></h2>
<p>oneCCL specification defines <code class="docutils literal notranslate"><span class="pre">event</span></code> as an abstraction that encapsulates synchronization context for <code class="docutils literal notranslate"><span class="pre">communicator</span></code> communication operations.</p>
<p>Each communication operation of oneCCL shall return an event object for tracking the operation’s progress. A vector of events may be passed to the <code class="docutils literal notranslate"><span class="pre">communicator</span></code> communication operation to designate input dependencies for the operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Support for handling of input events is optional</p>
</div>
<p>oneCCL specification defines the way to create an instance of the <code class="docutils literal notranslate"><span class="pre">event</span></code> class with a native object (<code class="docutils literal notranslate"><span class="pre">native_event_type</span></code>).</p>
<p>Creating a new event object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">event</span> <span class="n">ccl</span><span class="o">::</span><span class="n">create_event</span><span class="p">(</span><span class="n">native_event_type</span><span class="o">&amp;</span> <span class="n">native_event</span><span class="p">);</span>
</pre></div>
</div>
<dl class="simple">
<dt>native_event</dt><dd><p>the existing native event object</p>
</dd>
<dt>return <code class="docutils literal notranslate"><span class="pre">event</span></code></dt><dd><p>an event object</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">event</span></code> class shall provide ability to retrieve a native object.</p>
<p>Retrieving a native event object:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">native_event_type</span> <span class="n">event</span><span class="o">::</span><span class="n">get_native</span><span class="p">();</span>
</pre></div>
</div>
<dl>
<dt>return <code class="docutils literal notranslate"><span class="pre">native_event_type</span></code></dt><dd><div class="line-block">
<div class="line">a native event object</div>
<div class="line">shall throw exception if an <code class="docutils literal notranslate"><span class="pre">event</span></code> object does not wrap the native object</div>
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See also: <a class="reference internal" href="operation_progress.html"><span class="doc">Operation Progress Tracking</span></a></p>
</div>
</div>
<div class="section" id="operation-attributes">
<h2>Operation Attributes<a class="headerlink" href="#operation-attributes" title="Permalink to this headline">¶</a></h2>
<p>Communication operation behavior may be controlled through operation attributes.</p>
<p><a class="reference internal" href="operation_attributes.html"><span class="doc">Operation Attributes</span></a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="operations.html" class="btn btn-neutral float-right" title="Communication Operations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../definitions.html" class="btn btn-neutral float-left" title="Definitions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>