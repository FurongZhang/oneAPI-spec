<!--
SPDX-FileCopyrightText: 2019-2020 Intel Corporation

SPDX-License-Identifier: MIT
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>limiter_node &mdash; oneAPI Specification 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="broadcast_node" href="broadcast_node_cls.html" />
    <link rel="prev" title="sequencer_node" href="sequencer_node_cls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneDPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDNN/source/index.html">oneDNN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">oneCCL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneDAL</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nested-index.html">oneTBB</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nested-gen-info.html">General Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nested-interfaces.html">oneTBB Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../algorithms.html">Algorithms</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../flow_graph.html">Flow Graph</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../flow_graph.html#graph-class">Graph Class</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../flow_graph.html#nodes">Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../flow_graph.html#ports-and-edges">Ports and Edges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../flow_graph.html#special-messages-types">Special Messages Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../flow_graph.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task_scheduler.html">Task Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../containers.html">Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thread_local_storage.html">Thread Local Storage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nested-aux-interfaces.html">oneTBB Auxiliary Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">oneVPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneMKL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <!--
SPDX-FileCopyrightText: 2019-2020 Intel Corporation

SPDX-License-Identifier: MIT
-->

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../nested-index.html">oneTBB</a> </li>
          
        
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneTBB/source/flow_graph/limiter_node_cls.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="limiter-node">
<h1>limiter_node<a class="headerlink" href="#limiter-node" title="Permalink to this headline">Â¶</a></h1>
<p><strong>[flow_graph.limiter_node]</strong></p>
<p>A node that counts and limits the number of messages that pass through it.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Defined in header &lt;tbb/flow_graph.h&gt;</span>

<span class="k">namespace</span> <span class="n">tbb</span> <span class="p">{</span>
<span class="k">namespace</span> <span class="n">flow</span> <span class="p">{</span>

    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="nc">T</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">DecrementType</span><span class="o">=</span><span class="n">continue_msg</span> <span class="o">&gt;</span>
    <span class="k">class</span> <span class="nc">limiter_node</span> <span class="o">:</span> <span class="k">public</span> <span class="n">graph_node</span><span class="p">,</span> <span class="k">public</span> <span class="n">receiver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">public</span> <span class="n">sender</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">limiter_node</span><span class="p">(</span> <span class="n">graph</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">threshold</span> <span class="p">);</span>
        <span class="n">limiter_node</span><span class="p">(</span> <span class="k">const</span> <span class="n">limiter_node</span> <span class="o">&amp;</span><span class="n">src</span> <span class="p">);</span>

        <span class="n">receiver</span><span class="o">&lt;</span><span class="n">DecrementType</span><span class="o">&gt;&amp;</span> <span class="n">decrementer</span><span class="p">();</span>

        <span class="kt">bool</span> <span class="nf">try_put</span><span class="p">(</span> <span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
        <span class="kt">bool</span> <span class="nf">try_get</span><span class="p">(</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
    <span class="p">};</span>

<span class="p">}</span> <span class="c1">// namespace flow</span>
<span class="p">}</span> <span class="c1">// namespace tbb</span>
</pre></div>
</div>
<p>Requirements:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">T</span></code> type must meet the <cite>DefaultConstructible</cite> requirements from
[defaultconstructible] ISO C++ Standard section.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DecrementType</span></code> type must be an integral type or <code class="docutils literal notranslate"><span class="pre">continue_msg</span></code>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">limiter_node</span></code> is a <code class="docutils literal notranslate"><span class="pre">graph_node</span></code>, <code class="docutils literal notranslate"><span class="pre">receiver&lt;T&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">sender&lt;T&gt;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">limiter_node</span></code> has a <cite>discarding</cite> and <cite>broadcast-push</cite> <a class="reference internal" href="forwarding_and_buffering.html"><span class="doc">properties</span></a>.</p>
<p>This node does not accept new messages once the user-specified <code class="docutils literal notranslate"><span class="pre">threshold</span></code> is
reached. The internal counter of broadcasts is adjusted through use of
the <em>decrementer</em>, a <code class="docutils literal notranslate"><span class="pre">receiver</span></code> object embedded into the node that
can be obtained by calling the <code class="docutils literal notranslate"><span class="pre">decrementer</span></code> method. The counter values are truncated to be
inside the [0, <code class="docutils literal notranslate"><span class="pre">threshold</span></code>] interval.</p>
<p>The template parameter <code class="docutils literal notranslate"><span class="pre">DecrementType</span></code> specifies the type of the message that
can be sent to the decrementer. This template parameter is defined to
<code class="docutils literal notranslate"><span class="pre">continue_msg</span></code> by default. If an integral type is specified, positive values sent
to the decrementer determine the value by which the internal counter of broadcasts
will be decreased, while negative values determine the value by which the internal
counter of broadcasts will be increased.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">continue_msg</span></code> sent to the decrementer
decreases the internal counter of broadcasts by one.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">try_put</span></code> call on the decrementer results in
the new value of the counter of broadcasts to be less than the
<code class="docutils literal notranslate"><span class="pre">threshold</span></code>, the <code class="docutils literal notranslate"><span class="pre">limiter_node</span></code> tries to get a message from one
of its known predecessors and forward that message to all its
successors. If it cannot obtain a message from a predecessor, it decrements the counter of broadcasts.</p>
<div class="section" id="member-functions">
<h2>Member functions<a class="headerlink" href="#member-functions" title="Permalink to this headline">Â¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv4N3tbb4flow12limiter_node12limiter_nodeER5graph6size_t">
<span id="_CPPv3N3tbb4flow12limiter_node12limiter_nodeER5graph6size_t"></span><span id="_CPPv2N3tbb4flow12limiter_node12limiter_nodeER5graph6size_t"></span><span id="tbb::flow::limiter_node::limiter_node__graphR.s"></span><code class="sig-name descname">limiter_node</code><span class="sig-paren">(</span><a class="reference internal" href="graph_cls.html#_CPPv45graphR18task_group_context" title="graph">graph</a> &amp;<em>g</em>, size_t <em>threshold</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N3tbb4flow12limiter_node12limiter_nodeER5graph6size_t" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Constructs a <code class="docutils literal notranslate"><span class="pre">limiter_node</span></code> that allows up to <code class="docutils literal notranslate"><span class="pre">threshold</span></code> items
to pass through before rejecting <code class="docutils literal notranslate"><span class="pre">try_put</span></code>âs.</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N3tbb4flow12limiter_node12limiter_nodeERK12limiter_node">
<span id="_CPPv3N3tbb4flow12limiter_node12limiter_nodeERK12limiter_node"></span><span id="_CPPv2N3tbb4flow12limiter_node12limiter_nodeERK12limiter_node"></span><span id="tbb::flow::limiter_node::limiter_node__limiter_nodeCR"></span><code class="sig-name descname">limiter_node</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N3tbb4flow12limiter_node12limiter_nodeERK12limiter_node" title="tbb::flow::limiter_node::limiter_node">limiter_node</a> &amp;<em>src</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N3tbb4flow12limiter_node12limiter_nodeERK12limiter_node" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Constructs a <code class="docutils literal notranslate"><span class="pre">limiter_node</span></code> that has the same initial state that
<code class="docutils literal notranslate"><span class="pre">src</span></code> had at its construction. The new <code class="docutils literal notranslate"><span class="pre">limiter_node</span></code>
belongs to the same graph <code class="docutils literal notranslate"><span class="pre">g</span></code> as <code class="docutils literal notranslate"><span class="pre">src</span></code>, has the same
<code class="docutils literal notranslate"><span class="pre">threshold</span></code>. The list of predecessors, the list of successors,
and the current count of broadcasts are not copied from <code class="docutils literal notranslate"><span class="pre">src</span></code>.</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N3tbb4flow12limiter_node11decrementerEv">
<span id="_CPPv3N3tbb4flow12limiter_node11decrementerEv"></span><span id="_CPPv2N3tbb4flow12limiter_node11decrementerEv"></span><span id="tbb::flow::limiter_node::decrementer"></span>receiver&lt;DecrementType&gt; &amp;<code class="sig-name descname">decrementer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N3tbb4flow12limiter_node11decrementerEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Obtains a reference to the embedded <code class="docutils literal notranslate"><span class="pre">receiver</span></code> object that is used for the
internal counter adjustments.</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N3tbb4flow12limiter_node7try_putERK1T">
<span id="_CPPv3N3tbb4flow12limiter_node7try_putERK1T"></span><span id="_CPPv2N3tbb4flow12limiter_node7try_putERK1T"></span><span id="tbb::flow::limiter_node::try_put__TCR"></span>bool <code class="sig-name descname">try_put</code><span class="sig-paren">(</span><em class="property">const</em> T &amp;<em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N3tbb4flow12limiter_node7try_putERK1T" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>If the broadcast count is below the threshold, <code class="docutils literal notranslate"><span class="pre">v</span></code> is broadcast
to all successors.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code> if <code class="docutils literal notranslate"><span class="pre">v</span></code> is broadcast; <code class="docutils literal notranslate"><span class="pre">false</span></code> if <code class="docutils literal notranslate"><span class="pre">v</span></code>
is not broadcast because the threshold has been reached.</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N3tbb4flow12limiter_node7try_getER1T">
<span id="_CPPv3N3tbb4flow12limiter_node7try_getER1T"></span><span id="_CPPv2N3tbb4flow12limiter_node7try_getER1T"></span><span id="tbb::flow::limiter_node::try_get__TR"></span>bool <code class="sig-name descname">try_get</code><span class="sig-paren">(</span>T &amp;<em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N3tbb4flow12limiter_node7try_getER1T" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="broadcast_node_cls.html" class="btn btn-neutral float-right" title="broadcast_node" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sequencer_node_cls.html" class="btn btn-neutral float-left" title="sequencer_node" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>